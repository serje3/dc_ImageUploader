(this["webpackJsonpimage-uploader"]=this["webpackJsonpimage-uploader"]||[]).push([[0],[,,,function(e,t){var a=Object.freeze({Base:1,Load:2,Success:3});e.exports={PageStatus:a}},,,,,,,,,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,function(e,t,a){"use strict";a.r(t);var n=a(1),s=a.n(n),r=a(11),c=a.n(r),o=a(2),i=a(4),u=a(6),l=a(5),d=(a(16),a(17),a(18),a(19),a(7)),p=a(3),j=a.p+"static/media/image.3710b8a3.svg",g=a(0),h=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).handleEnterEvent=function(e){e.target.classList.add("hovered")},n.handleLeaveEvent=function(e){e.target.classList.remove("hovered")},n.handleDropEvent=function(e){e.preventDefault(),e.target.classList.remove("hovered");var t=document.getElementById("load-file");t.files=e.dataTransfer.files;var a=new Event("change",{bubbles:!0,cancelable:!1});t.dispatchEvent(a)},n.state={idDropArea:"#drop-area"},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.setState({dropTarget:document.querySelector(this.state.idDropArea)});var t=function(t,a){t.isEqualNode(e.state.dropTarget)&&a()};window.addEventListener("dragover",(function(e){e.preventDefault()}),!1),window.addEventListener("dragenter",(function(a){return t(a.target,e.handleEnterEvent.bind(e,a))})),window.addEventListener("dragleave",(function(a){return t(a.target,e.handleLeaveEvent.bind(e,a))})),window.addEventListener("drop",(function(a){return t(a.target,e.handleDropEvent.bind(e,a))}),!1)}},{key:"render",value:function(){return Object(g.jsx)("div",{className:"dnd__workspace",children:Object(g.jsxs)("div",{className:"base__dnd",children:[Object(g.jsx)("img",{src:j,className:"image__dnd",alt:"mountains and clouds",draggable:"false"}),Object(g.jsx)("div",{className:"text__dnd",children:"Drag & Drop your image here"}),Object(g.jsx)("div",{id:this.state.idDropArea.slice(1),className:"dropper__dnd"})]})})}}]),a}(s.a.Component),b=a(8),f=a.n(b),m=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"openFileManager",value:function(){var e=document.getElementById("load-file");e?e.click():console.error('INPUT[id="load-file"]: UNDEFINED')}},{key:"submitFile",value:function(){var e=f()("#load-file").prop("files"),t=new FormData;t.append("url",e[0]),this.props.handleAjaxRequest(t)}},{key:"getHiddenInputs",value:function(){return Object(g.jsx)("input",{onChange:this.submitFile.bind(this),accept:"image/jpeg,image/png",id:"load-file",type:"file",name:"url",style:{display:"none"}},0)}},{key:"render",value:function(){return Object(g.jsxs)("form",{method:"post",encType:"multipart/form-data",children:[Object(g.jsx)(h,{}),Object(g.jsx)("div",{className:"or__workspace",children:"Or"}),Object(g.jsx)("div",{className:"button_container__workspace",children:Object(g.jsx)("div",{onClick:this.openFileManager,className:"button__workspace",children:"Choose a file"})}),this.getHiddenInputs()]})}}]),a}(s.a.Component);function v(e){return[Object(g.jsx)("div",{className:"title__workspace",children:"Upload your image"},0),Object(g.jsx)("div",{className:"description__workspace",children:"File should be Jpeg, Png"},1),Object(g.jsx)(m,{handleAjaxRequest:e.handleAjaxRequest},2)]}function O(){return[Object(g.jsx)("div",{className:"load__text",children:"Uploading..."},0),Object(g.jsx)("div",{className:"load__panel_background",children:Object(g.jsx)("div",{className:"load__panel"})},1)]}var x=a.p+"static/media/check_circle_black_24dp.004939a6.svg",_=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={url:e.url},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=document.querySelector("#copy_button"),t=document.getElementById("link_text");e.onclick=function(){t.select(),document.execCommand("copy")}}},{key:"render",value:function(){return[Object(g.jsx)("img",{src:x,className:"success_img__workspace",alt:"success_img__workspace"},0),Object(g.jsx)("div",{className:"success_text__workspace",children:"Uploaded Successfully!"},1),Object(g.jsx)("img",{src:this.state.url,className:"image_preview__workspace",alt:"preview"},2),Object(g.jsxs)("div",{className:"link_container__workspace",children:[Object(g.jsx)("input",{type:"text",id:"link_text",className:"link_text__workspace",defaultValue:this.state.url}),Object(g.jsx)("div",{id:"copy_button",className:"copy_button__workspace",children:"Copy Link"})]},3)]}}]),a}(s.a.Component),S=a(10),k=function e(){Object(o.a)(this,e)};k.handleAjaxRequest=function(e,t){e.props.onPageStatusChanged(p.PageStatus.Load),f.a.ajax({url:"http://localhost:2000/api/image",method:"post",type:"POST",contentType:!1,processData:!1,data:t,success:function(t){console.log(t),e.handleAjaxResponse(Object(S.a)(Object(S.a)({},t),{},{status:201})),e.preloadImage(e.state.url).then((function(t){e.setState({imgObject:t}),setTimeout(e.props.onPageStatusChanged,500,p.PageStatus.Success)}))},error:function(e,t){console.log(e,t),0===e.status?alert("Not connect. Verify Network."):404===e.status?alert("Requested page not found (404)."):500===e.status?alert("Internal Server Error (500)."):"parsererror"===t?alert("Requested JSON parse failed."):"timeout"===t?alert("Time out error."):"abort"===t?alert("Ajax request aborted."):alert("Uncaught Error. "+e.responseText)}})},k.handleAjaxResponse=function(e,t){var a=t.url.replace("localhost","localhost:2000");e.setState({url:a,imgObject:null,status:t.status})};var w=k,y=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).preloadImage=function(e){return new Promise((function(t,a){var n=new Image;n.src=e,n.onload=function(){t(n)}}))},n.getBasePage=function(){return Object(g.jsx)(v,{handleAjaxRequest:n.handleAjaxRequest})},n.getLoadPage=function(){return Object(g.jsx)(O,{onPageStatusChanged:n.props.onPageStatusChanged})},n.getSuccessPage=function(){if(n.state.status<300&&n.state.status>=200)return Object(g.jsx)(_,{url:n.state.url})},n.state={url:"https://images.unsplash.com/photo-1563769874036-8f569cb59d30?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=675&q=80",status:200},n.handleAjaxRequest=function(e){return w.handleAjaxRequest(Object(d.a)(n),e)},n.handleAjaxResponse=function(e){return w.handleAjaxResponse(Object(d.a)(n),e)},n}return Object(i.a)(a,[{key:"render",value:function(){return Object(g.jsx)("div",{className:"workspace",children:this.props.pageStatus===p.PageStatus.Base?this.getBasePage():this.props.pageStatus===p.PageStatus.Load?this.getLoadPage():this.props.pageStatus===p.PageStatus.Success?this.getSuccessPage():"Error 404"})}}]),a}(s.a.Component),N=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).handlePageStatusChange=function(e){n.setState({pageStatus:e})},n.getBaseBlockClass=function(){return n.state.pageStatus===p.PageStatus.Base?"base-block":n.state.pageStatus===p.PageStatus.Load?"load-block":n.state.pageStatus===p.PageStatus.Success?"success-block":void 0},n.state={pageStatus:p.PageStatus.Base},n}return Object(i.a)(a,[{key:"render",value:function(){return Object(g.jsxs)("div",{className:"wrapper",children:[Object(g.jsx)("div",{className:this.getBaseBlockClass(),children:Object(g.jsx)(y,{pageStatus:this.state.pageStatus,onPageStatusChanged:this.handlePageStatusChange})}),Object(g.jsxs)("footer",{children:["created by ",Object(g.jsx)("a",{href:"https://github.com/serje3",className:"username__footer",children:"serje3"})," - devChallenges.io"]})]})}}]),a}(s.a.Component),P=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,22)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,r=t.getLCP,c=t.getTTFB;a(e),n(e),s(e),r(e),c(e)}))};c.a.render(Object(g.jsx)(s.a.StrictMode,{children:Object(g.jsx)(N,{})}),document.getElementById("root")),P()}],[[21,1,2]]]);
//# sourceMappingURL=main.2fafbf74.chunk.js.map